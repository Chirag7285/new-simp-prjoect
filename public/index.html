<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Calculator</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 520px; margin: 40px auto; padding: 0 16px; }
    .box { border: 1px solid #ddd; border-radius: 10px; padding: 18px; }
    input, select, button { padding: 10px; font-size: 16px; }
    input { width: 100%; box-sizing: border-box; margin: 8px 0; }
    .row { display: flex; gap: 10px; align-items: center; margin-top: 10px; }
    .row > * { flex: 1; }
    button { width: 100%; cursor: pointer; }
    .result { margin-top: 12px; font-size: 18px; }
    .err { color: #b00020; }
  </style>
</head>
<body>
  <h2>Simple Calculator ðŸ§®</h2>
  <div class="box">
    <label>Number 1</label>
    <input id="num1" type="number" step="any" placeholder="e.g. 10" />

    <label>Number 2</label>
    <input id="num2" type="number" step="any" placeholder="e.g. 5" />

    <div class="row">
      <select id="op">
        <option value="add">Add (+)</option>
        <option value="subtract">Subtract (âˆ’)</option>
        <option value="multiply">Multiply (Ã—)</option>
        <option value="divide">Divide (Ã·)</option>
      </select>
      <button id="btn">Calculate</button>
    </div>

    <div id="out" class="result"></div>
  </div>

  <script>
    const out = document.getElementById("out");
    document.getElementById("btn").addEventListener("click", async () => {
      out.textContent = "";
      out.className = "result";

      const num1 = document.getElementById("num1").value;
      const num2 = document.getElementById("num2").value;
      const operation = document.getElementById("op").value;

      try {
        const res = await fetch(`/calculate?num1=${encodeURIComponent(num1)}&num2=${encodeURIComponent(num2)}&operation=${encodeURIComponent(operation)}`);
        const text = await res.text();

        if (!res.ok) {
          out.className = "result err";
          out.textContent = text;
          return;
        }

        const data = JSON.parse(text);
        out.textContent = `Result: ${data.result}`;
      } catch (e) {
        out.className = "result err";
        out.textContent = "Error calling server. Check if app is running.";
      }
    });
  </script>
</body>
</html>
